<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—ã–±–µ–π –∏—Ö –≤—Å–µ—Ö! - Salavat Yulaev RNG</title>
    <style>
        :root {
            --main-blue: #0065b3;
            --light-blue: #4a90e2;
            --dark-blue: #004a8f;
            --white: #ffffff;
            --green: #00a651;
            --light-green: #4cda8c;
            --red: #e30613;
            --light-red: #ff4d5a;
            --gold: #ffd700;
            --orange: #ff9800;
            --purple: #9c27b0;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--dark-blue);
            color: var(--white);
            text-align: center;
        }
        
        .header {
            background: linear-gradient(to bottom, var(--main-blue), var(--dark-blue));
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .logo {
            max-width: 200px;
            height: auto;
            margin-bottom: 10px;
        }
        
        h1 {
            margin: 0;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .currency {
            font-size: 1.5rem;
            margin: 15px 0;
            font-weight: bold;
            background-color: var(--green);
            display: inline-block;
            padding: 8px 20px;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .income-multiplier {
            font-size: 1.1rem;
            margin: 10px 0;
            color: var(--gold);
            font-weight: bold;
        }
        
        .packs-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .pack {
            background: linear-gradient(to bottom right, var(--light-blue), var(--main-blue));
            border: 2px solid var(--white);
            border-radius: 10px;
            padding: 15px;
            width: 220px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
        }
        
        .pack:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }
        
        .pack-overload-indicator {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 20px;
            height: 20px;
            background: linear-gradient(45deg, var(--orange), var(--gold));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            color: black;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .pack-overload-ready {
            background: linear-gradient(45deg, var(--gold), #ffeb3b);
            animation: glow 1.5s infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 5px var(--gold); }
            to { box-shadow: 0 0 15px var(--gold), 0 0 20px var(--orange); }
        }
        
        .pack h3 {
            margin-top: 0;
            color: var(--white);
        }
        
        .pack-price {
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--white);
            background-color: var(--green);
            padding: 5px 10px;
            border-radius: 15px;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .load-info {
            font-size: 0.8rem;
            margin: 8px 0;
            color: var(--light-green);
        }
        
        .load-bar-container {
            width: 100%;
            height: 8px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .load-progress {
            height: 100%;
            background: linear-gradient(to right, var(--green), var(--light-green));
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .load-bar-overload {
            background: linear-gradient(to right, var(--orange), var(--gold));
        }
        
        .cards-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            padding: 20px;
            min-height: 200px;
        }
        
        .card {
            width: 150px;
            height: 200px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            position: relative;
            transition: transform 0.3s ease;
            cursor: pointer;
        }
        
        .card:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        
        .card-upgradable::after {
            content: "‚Üë";
            position: absolute;
            top: 5px;
            left: 5px;
            background-color: var(--gold);
            color: black;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .card-common { background: linear-gradient(to bottom right, #a0a0a0, #808080); border: 2px solid #c0c0c0; }
        .card-rare { background: linear-gradient(to bottom right, #4a90e2, #0065b3); border: 2px solid #80c0ff; }
        .card-epic { background: linear-gradient(to bottom right, #9c27b0, #7b1fa2); border: 2px solid #d05ce3; }
        .card-super-epic { background: linear-gradient(to bottom right, #e91e63, #c2185b); border: 2px solid #ff5c8d; }
        .card-legendary { background: linear-gradient(to bottom right, #ff9800, #f57c00); border: 2px solid #ffc947; }
        .card-mythic { background: linear-gradient(to bottom right, #4caf50, #388e3c); border: 2px solid #81c784; }
        .card-vanished { background: linear-gradient(to bottom right, #607d8b, #455a64); border: 2px solid #90a4ae; }
        .card-assistant { background: linear-gradient(to bottom right, #ff5722, #d84315); border: 2px solid #ff8a65; }
        .card-captain { background: linear-gradient(to bottom right, #9c27b0, #7b1fa2); border: 2px solid #d05ce3; }
        .card-combined { background: linear-gradient(to bottom right, #9c27b0, #ff5722); border: 2px solid #e05ce3; }
        .card-infinity { 
            background: linear-gradient(to bottom right, #00bcd4, #0097a7); 
            border: 2px solid #80deea; 
            animation: glow 2s infinite alternate; 
        }
        
        .card-name {
            font-weight: bold;
            font-size: 1.1rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }
        
        .card-rarity {
            font-size: 0.9rem;
            font-style: italic;
        }
        
        .card-income {
            font-size: 0.9rem;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 3px 8px;
            border-radius: 10px;
        }
        
        .card-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--red);
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .total-income {
            font-size: 1.3rem;
            margin: 20px 0;
            padding: 10px;
            background-color: var(--main-blue);
            border-radius: 10px;
            display: inline-block;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            background-color: var(--green);
            color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
            max-width: 300px;
        }
        
        .notification.error {
            background-color: var(--red);
        }
        
        .notification.warning {
            background-color: var(--orange);
        }
        
        .notification.show {
            opacity: 1;
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 10px;
        }
        
        .tab {
            padding: 10px 20px;
            background-color: var(--main-blue);
            border: none;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background-color: var(--green);
            transform: scale(1.05);
        }
        
        .tab-content {
            display: none;
            padding: 20px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: linear-gradient(to bottom, var(--main-blue), var(--dark-blue));
            padding: 30px;
            border-radius: 15px;
            max-width: 400px;
            text-align: center;
            border: 2px solid var(--white);
        }
        
        .modal-close {
            float: right;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--white);
            margin-top: -10px;
            margin-right: -10px;
        }
        
        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .modal-button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .modal-button.confirm {
            background-color: var(--green);
            color: white;
        }
        
        .modal-button.cancel {
            background-color: var(--red);
            color: white;
        }
        
        .modal-button:hover {
            transform: scale(1.05);
        }
        
        .upgrade-cost {
            font-size: 0.8rem;
            background-color: var(--gold);
            color: black;
            padding: 2px 6px;
            border-radius: 8px;
            margin-top: 5px;
        }
        
        .rebirth-option {
            background: linear-gradient(to bottom right, var(--purple), #7b1fa2);
            border: 2px solid var(--gold);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .rebirth-option:hover {
            transform: scale(1.02);
            background: linear-gradient(to bottom right, #ab47bc, #8e24aa);
        }
        
        .rebirth-option.locked {
            background: linear-gradient(to bottom right, #666, #444);
            border: 2px solid #999;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .rebirth-option.locked:hover {
            transform: none;
            background: linear-gradient(to bottom right, #666, #444);
        }
        
        .achievement {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            margin: 5px 0;
            text-align: left;
        }
        
        .achievement.gold {
            border: 2px solid var(--gold);
            background: linear-gradient(to right, rgba(255, 215, 0, 0.2), rgba(255, 215, 0, 0.1));
        }
        
        .achievement.unlocked {
            background: rgba(0, 166, 81, 0.2);
        }
        
        .collection {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            margin: 5px 0;
            text-align: left;
        }
        
        .collection.completed {
            background: rgba(255, 215, 0, 0.2);
            border: 1px solid var(--gold);
        }
        
        .mini-game {
            background: linear-gradient(to bottom right, var(--light-blue), var(--main-blue));
            border-radius: 10px;
            padding: 20px;
            margin: 10px 0;
        }
        
        .game-button {
            padding: 10px 20px;
            background-color: var(--green);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <img src="https://upload.wikimedia.org/wikipedia/ru/a/a0/HC_Salavat_Yulaev_Logo.svg" alt="Salavat Yulaev Logo" class="logo">
        <h1>–í—ã–±–µ–π –∏—Ö –≤—Å–µ—Ö!</h1>
    </div>
    
    <div class="currency">SU: <span id="currency-value">1000</span></div>
    <div class="income-multiplier" id="income-multiplier">–ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Ö–æ–¥–∞: x1.0</div>
    <div class="total-income">–û–±—â–∏–π –¥–æ—Ö–æ–¥ –≤ —Å–µ–∫—É–Ω–¥—É: <span id="total-income">0</span> SU</div>
    
    <div class="tabs">
        <button class="tab active" onclick="switchTab('packs')">–ü–∞–∫–∏</button>
        <button class="tab" onclick="switchTab('rebirth')">–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</button>
        <button class="tab" onclick="switchTab('collections')">–ö–æ–ª–ª–µ–∫—Ü–∏–∏</button>
        <button class="tab" onclick="switchTab('achievements')">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
        <button class="tab" onclick="switchTab('minigames')">–ú–∏–Ω–∏-–∏–≥—Ä—ã</button>
    </div>
    
    <div id="packs-tab" class="tab-content active">
        <div class="packs-container" id="packs-container">
            <!-- –ü–∞–∫–∏ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã JavaScript -->
        </div>
    </div>
    
    <div id="rebirth-tab" class="tab-content">
        <h2>–°–∏—Å—Ç–µ–º–∞ –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è</h2>
        <p>–°–±—Ä–æ—Å—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –±–æ–Ω—É—Å—ã –∫ –¥–æ—Ö–æ–¥—É!</p>
        
        <div class="rebirth-option" id="rebirth-0" onclick="openRebirthModal(0)">
            <h3>–ü–µ—Ä–≤–æ–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</h3>
            <p>–¶–µ–Ω–∞: 50,000 SU</p>
            <p>–ù–∞–≥—Ä–∞–¥–∞: –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Ö–æ–¥–∞ x1.5</p>
        </div>
        
        <div class="rebirth-option locked" id="rebirth-1">
            <h3>–í—Ç–æ—Ä–æ–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</h3>
            <p>–¶–µ–Ω–∞: 500,000 SU</p>
            <p>–ù–∞–≥—Ä–∞–¥–∞: –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Ö–æ–¥–∞ x3.0</p>
            <p><em>–¢—Ä–µ–±—É–µ—Ç—Å—è: –ü–µ—Ä–≤–æ–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</em></p>
        </div>
        
        <div class="rebirth-option locked" id="rebirth-2">
            <h3>–¢—Ä–µ—Ç—å–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</h3>
            <p>–¶–µ–Ω–∞: 5,000,000 SU</p>
            <p>–ù–∞–≥—Ä–∞–¥–∞: –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Ö–æ–¥–∞ x5.0</p>
            <p><em>–¢—Ä–µ–±—É–µ—Ç—Å—è: –í—Ç–æ—Ä–æ–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</em></p>
        </div>
        
        <div class="rebirth-option locked" id="rebirth-3">
            <h3>–§–∏–Ω–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</h3>
            <p>–¶–µ–Ω–∞: 100,000,000 SU</p>
            <p>–ù–∞–≥—Ä–∞–¥–∞: –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Ö–æ–¥–∞ x10.0 + 250,000 SU</p>
            <p><em>–¢—Ä–µ–±—É–µ—Ç—Å—è: –¢—Ä–µ—Ç—å–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</em></p>
        </div>
    </div>
    
    <div id="collections-tab" class="tab-content">
        <h2>–ö–æ–ª–ª–µ–∫—Ü–∏–∏</h2>
        <div id="collections-container">
            <!-- –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã JavaScript -->
        </div>
    </div>
    
    <div id="achievements-tab" class="tab-content">
        <h2>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
        <div id="achievements-container">
            <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã JavaScript -->
        </div>
    </div>
    
    <div id="minigames-tab" class="tab-content">
        <h2>–ú–∏–Ω–∏-–∏–≥—Ä—ã</h2>
        
        <div class="mini-game">
            <h3>üé∞ Lucky-Man</h3>
            <p>–û—Ç–∫—Ä–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–∞–∫! –ß–µ–º –ª—É—á—à–µ –∫–∞—Ä—Ç–∞ - —Ç–µ–º –±–æ–ª—å—à–µ –Ω–∞–≥—Ä–∞–¥–∞!</p>
            <p>–°—Ç–æ–∏–º–æ—Å—Ç—å: 2,500 SU</p>
            <p>–ù–∞–≥—Ä–∞–¥–∞: –¥–æ 25,000 SU</p>
            <button class="game-button" onclick="startLuckyManGame()">–ò–≥—Ä–∞—Ç—å</button>
            <div id="lucky-man-result"></div>
        </div>
    </div>
    
    <div class="cards-container" id="cards-container">
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal" id="upgrade-modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeUpgradeModal()">√ó</span>
            <h2>–ü—Ä–æ–∫–∞—á–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∏</h2>
            <p>–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–∫–∞—á–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É <strong id="upgrade-card-name"></strong>?</p>
            <p><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong> 25,000 SU</p>
            <p><strong>–®–∞–Ω—Å —É—Å–ø–µ—Ö–∞:</strong> 10%</p>
            <p><strong>–†–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏:</strong> 10%</p>
            <div class="modal-buttons">
                <button class="modal-button confirm" onclick="confirmUpgrade()">–ü—Ä–æ–∫–∞—á–∞—Ç—å</button>
                <button class="modal-button cancel" onclick="closeUpgradeModal()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="rebirth-modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeRebirthModal()">√ó</span>
            <h2>–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ</h2>
            <p id="rebirth-description"></p>
            <p><strong>–í–Ω–∏–º–∞–Ω–∏–µ!</strong> –í—ã –ø–æ—Ç–µ—Ä—è–µ—Ç–µ –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å!</p>
            <div class="modal-buttons">
                <button class="modal-button confirm" onclick="confirmRebirth()">–ü–µ—Ä–µ—Ä–æ–¥–∏—Ç—å—Å—è</button>
                <button class="modal-button cancel" onclick="closeRebirthModal()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification"></div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–æ–≤ —Å –ø–æ—Ä—è–¥–∫–æ–º —Ä–µ–¥–∫–æ—Å—Ç–µ–π –¥–ª—è –ø—Ä–æ–∫–∞—á–∫–∏
        const players = [
            { name: "ererer_19991", income: 50, rarity: "–û–±—ã—á–Ω—ã–π", rarityClass: "common", upgradeOrder: 0 },
            { name: "Redris", income: 100, rarity: "–û–±—ã—á–Ω—ã–π", rarityClass: "common", upgradeOrder: 0 },
            { name: "ZXzGreafzXZ", income: 125, rarity: "–†–µ–¥–∫–∏–π", rarityClass: "rare", upgradeOrder: 1 },
            { name: "BILAZ", income: 250, rarity: "–°–≤–µ—Ä—Ö—Ä–µ–¥–∫–∏–π", rarityClass: "super-epic", upgradeOrder: 2 },
            { name: "Chorni | ST", income: 350, rarity: "–°–≤–µ—Ä—Ö—Ä–µ–¥–∫–∏–π", rarityClass: "super-epic", upgradeOrder: 2 },
            { name: "Red_himik", income: 650, rarity: "–≠–ø–∏—á–µ—Å–∫–∏–π", rarityClass: "epic", upgradeOrder: 3 },
            { name: "VIZI", income: 1250, rarity: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π", rarityClass: "legendary", upgradeOrder: 4 },
            { name: "Tysedn", income: 1680, rarity: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π", rarityClass: "legendary", upgradeOrder: 4 },
            { name: "Chorni | GK", income: 2500, rarity: "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π", rarityClass: "mythic", upgradeOrder: 5 },
            { name: "sfwr_x1zipe", income: 2750, rarity: "–ò—Å—á–µ–∑–Ω—É–≤—à–∏–π", rarityClass: "vanished", upgradeOrder: 6 },
            { name: "White", income: 3350, rarity: "–ò—Å—á–µ–∑–Ω—É–≤—à–∏–π", rarityClass: "vanished", upgradeOrder: 6 },
            { name: "A | Chorni", income: 5000, rarity: "–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç—Å–∫–∏–π", rarityClass: "assistant", upgradeOrder: 7 },
            { name: "Gartik", income: 10000, rarity: "–ö–∞–ø–∏—Ç–∞–Ω—Å–∫–∏–π", rarityClass: "captain", upgradeOrder: 8 },
            { name: "Redris-Red_Himik", income: 15000, rarity: "–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π-–û–±—ã—á–Ω—ã–π", rarityClass: "combined", upgradeOrder: -1 },
            { name: "Chorni-Gartik", income: 50000, rarity: "INFINITY", rarityClass: "infinity", upgradeOrder: -1 }
        ];

        // –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–¥–∫–æ—Å—Ç–µ–π –¥–ª—è –ø—Ä–æ–∫–∞—á–∫–∏
        const rarityOrder = ["common", "rare", "super-epic", "epic", "legendary", "mythic", "vanished", "assistant", "captain"];

        // –î–∞–Ω–Ω—ã–µ –ø–∞–∫–æ–≤ (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ —Ä–µ–¥–∫–æ—Å—Ç—è–º–∏)
        const packs = [
            { name: "–ë–∞–∑–æ–≤—ã–π", price: 500, chances: { "common": 75, "rare": 25 }, load: 0 },
            { name: "–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π", price: 3750, chances: { "common": 50, "rare": 30, "super-epic": 15, "epic": 5 }, load: 0 },
            { name: "–£–ª—É—á—à–µ–Ω–Ω—ã–π", price: 11250, chances: { "rare": 75, "super-epic": 20, "epic": 5 }, load: 0 },
            { name: "–ì–æ–ª–µ–≤–æ–π", price: 30000, chances: { "common": 5, "rare": 5, "super-epic": 60, "epic": 20, "legendary": 10 }, load: 0 },
            { name: "–í–µ—Ä—à–∏–Ω—ã", price: 75000, chances: { "super-epic": 40, "epic": 40, "legendary": 20 }, load: 0 },
            { name: "–ù–æ–≤–æ–µ –ù–∞—á–∞–ª–æ", price: 225000, chances: { "legendary": 94, "mythic": 5, "vanished": 1 }, load: 0 },
            { name: "–õ–µ–≥–µ–Ω–¥–∞ –æ –ò–≥—Ä–æ–∫–∞—Ö", price: 600000, chances: { "common": 10, "mythic": 50, "vanished": 35, "assistant": 5 }, load: 0 },
            { name: "–õ–µ–≥–µ–Ω–¥–∞ –æ –ò–≥—Ä–æ–∫–∞—Ö 2", price: 1200000, chances: { "mythic": 5, "vanished": 75, "assistant": 15, "captain": 5 }, load: 0 },
            { name: "–ö–æ–º–±–æ", price: 2250000, chances: { "mythic": 5, "combined": 95 }, load: 0 },
            { name: "ALL OR NOTHING", price: 7500000, chances: { "common": 25, "infinity": 75 }, load: 0 }
        ];

        // –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è
        const rebirthOptions = [
            { price: 50000, multiplier: 1.5, name: "–ü–µ—Ä–≤–æ–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ" },
            { price: 500000, multiplier: 3.0, name: "–í—Ç–æ—Ä–æ–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ" },
            { price: 5000000, multiplier: 5.0, name: "–¢—Ä–µ—Ç—å–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ" },
            { price: 100000000, multiplier: 10.0, name: "–§–∏–Ω–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ", bonusSU: 250000 }
        ];

        // –ö–æ–ª–ª–µ–∫—Ü–∏–∏
        const collections = [
            { 
                name: "–§–∞–Ω–∞—Ç –ß–µ—Ä–Ω–æ–≥–æ", 
                cards: ["Chorni | ST", "Chorni | GK", "A | Chorni"], 
                bonus: 0.5,
                completed: false
            },
            { 
                name: "–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–µ–∑ –∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π", 
                cards: ["Redris", "Red_himik"], 
                bonus: 0.1,
                completed: false
            },
            { 
                name: "–¢–∞–π–ª–µ—Ä–∞ –∑–¥–µ—Å—å –Ω–µ—Ç", 
                cards: ["sfwr_x1zipe", "White"], 
                bonus: 0.1,
                completed: false
            },
            { 
                name: "–£–ø—Ä–∞–≤–ª—è—é—â–∞—è –∫–æ–º–ø–∞–Ω–∏—è", 
                cards: ["A | Chorni", "Gartik"], 
                bonus: 0.2,
                completed: false
            },
            { 
                name: "–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–±–µ–¥—É", 
                cards: ["Gartik", "Redris-Red_Himik", "Chorni-Gartik"], 
                bonus: 1.5,
                completed: false
            }
        ];

        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        const achievements = [
            // –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–∞–∫–æ–≤
            { id: "first_pack", name: "–û–Ω –ø–æ–ø–æ–ª–∑!", description: "–û—Ç–∫—Ä—ã—Ç—å –ø–µ—Ä–≤—ã–π –ø–∞–∫", condition: (game) => game.stats.packsOpened >= 1, unlocked: false },
            { id: "third_pack", name: "–û–Ω –≤—Å—Ç–∞–ª!", description: "–û—Ç–∫—Ä—ã—Ç—å 3 –ø–∞–∫–∞", condition: (game) => game.stats.packsOpened >= 3, unlocked: false },
            { id: "tenth_pack", name: "–û–Ω —Ö–æ–¥–∏—Ç!", description: "–û—Ç–∫—Ä—ã—Ç—å 10 –ø–∞–∫–æ–≤", condition: (game) => game.stats.packsOpened >= 10, unlocked: false },
            { id: "hundredth_pack", name: "–ü–µ—Ä–≤—ã–π —Ä–∞–∑ –≤ –ø–µ—Ä–≤—ã–π –∫–ª–∞—Å—Å", description: "–û—Ç–∫—Ä—ã—Ç—å 100 –ø–∞–∫–æ–≤", condition: (game) => game.stats.packsOpened >= 100, unlocked: false },
            { id: "two_fifty_pack", name: "–í—ã–ø—É—Å–∫–Ω–æ–π", description: "–û—Ç–∫—Ä—ã—Ç—å 250 –ø–∞–∫–æ–≤", condition: (game) => game.stats.packsOpened >= 250, unlocked: false },
            { id: "five_hundred_pack", name: "–ü–µ—Ä–≤–∞—è —Ä–∞–±–æ—Ç–∞", description: "–û—Ç–∫—Ä—ã—Ç—å 500 –ø–∞–∫–æ–≤", condition: (game) => game.stats.packsOpened >= 500, unlocked: false },
            { id: "thousand_pack", name: "–ü–µ–Ω—Å–∏—è", description: "–û—Ç–∫—Ä—ã—Ç—å 1000 –ø–∞–∫–æ–≤", condition: (game) => game.stats.packsOpened >= 1000, unlocked: false },
            { id: "five_thousand_pack", name: "–õ–∏–Ω–∏—è –∂–∏–∑–Ω–∏", description: "–û—Ç–∫—Ä—ã—Ç—å 5000 –ø–∞–∫–æ–≤", condition: (game) => game.stats.packsOpened >= 5000, unlocked: false, gold: true },
            
            // –î—É–±–ª–∏–∫–∞—Ç—ã
            { id: "five_duplicates", name: "–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è –ù–ï –ë–£–î–ï–¢!", description: "–ü–æ–ª—É—á–∏—Ç—å 5 –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏", condition: (game) => Math.max(...Object.values(game.playerCards).map(c => c.count)) >= 5, unlocked: false },
            { id: "ten_duplicates", name: "–¶–µ–Ω–∏—Ç–µ–ª—å", description: "–ü–æ–ª—É—á–∏—Ç—å 10 –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏", condition: (game) => Math.max(...Object.values(game.playerCards).map(c => c.count)) >= 10, unlocked: false },
            { id: "twenty_duplicates", name: "–§–∞–Ω–∞—Ç", description: "–ü–æ–ª—É—á–∏—Ç—å 20 –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏", condition: (game) => Math.max(...Object.values(game.playerCards).map(c => c.count)) >= 20, unlocked: false },
            { id: "hundred_duplicates", name: "–°—Ç–∞–ª–∫–µ—Ä", description: "–ü–æ–ª—É—á–∏—Ç—å 100 –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏", condition: (game) => Math.max(...Object.values(game.playerCards).map(c => c.count)) >= 100, unlocked: false },
            { id: "five_hundred_duplicates", name: "Yandere", description: "–ü–æ–ª—É—á–∏—Ç—å 500 –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏", condition: (game) => Math.max(...Object.values(game.playerCards).map(c => c.count)) >= 500, unlocked: false },
            { id: "thousand_duplicates", name: "Yangire", description: "–ü–æ–ª—É—á–∏—Ç—å 1000 –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏", condition: (game) => Math.max(...Object.values(game.playerCards).map(c => c.count)) >= 1000, unlocked: false, gold: true },
            
            // –ù–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å
            { id: "first_overload", name: "–ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞", description: "–í–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–≤–æ–π –Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å—é", condition: (game) => game.stats.overloadsUsed >= 1, unlocked: false },
            { id: "five_overloads", name: "–°–∏—Å—Ç–µ–º–Ω—ã–π —Å–±–æ–π", description: "5 –Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–µ–π", condition: (game) => game.stats.overloadsUsed >= 5, unlocked: false },
            { id: "fifteen_overloads", name: "–ß—Ç–æ-—Ç–æ —Å–æ–∑–¥–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç–æ–≤—ã–µ –æ—à–∏–±–∫–∏", description: "15 –Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–µ–π", condition: (game) => game.stats.overloadsUsed >= 15, unlocked: false },
            { id: "fifty_overloads", name: "SUWeb", description: "50 –Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–µ–π", condition: (game) => game.stats.overloadsUsed >= 50, unlocked: false },
            
            // –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è
            { id: "first_rebirth", name: "re:", description: "1 –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ", condition: (game) => game.rebirths >= 1, unlocked: false },
            { id: "second_rebirth", name: "re:re:", description: "2 –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è", condition: (game) => game.rebirths >= 2, unlocked: false },
            { id: "third_rebirth", name: "re:re:re:", description: "3 –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è", condition: (game) => game.rebirths >= 3, unlocked: false },
            { id: "final_rebirth", name: "RE:FINAL", description: "–ü–æ—Å–ª–µ–¥–Ω–µ–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ", condition: (game) => game.rebirths >= 4, unlocked: false },
            
            // –ü—Ä–æ—á–∏–µ
            { id: "unlucky", name: "–ù–µ—É–¥–∞—á–Ω–∏–∫", description: "–í—ã–±–∏—Ç—å –∏–∑ ALL OR NOTHING –∫–∞—Ä—Ç–æ—á–∫—É –û–±—ã—á–Ω–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏", condition: (game) => game.stats.unluckyAllOrNothing, unlocked: false },
            { id: "collector", name: "–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä", description: "–°–æ–±—Ä–∞—Ç—å –≤—Å–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏", condition: (game) => game.collectionsCompleted >= collections.length, unlocked: false }
        ];

        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currency = 1000;
        let playerCards = {};
        let totalIncome = 0;
        let incomeInterval;
        let currentUpgradeCard = null;
        let currentRebirthOption = null;
        let rebirthMultiplier = 1.0;
        let rebirths = 0;
        let collectionsCompleted = 0;
        
        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        let gameStats = {
            packsOpened: 0,
            overloadsUsed: 0,
            unluckyAllOrNothing: false
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            loadGame();
            renderPacks();
            updateCurrencyDisplay();
            updateTotalIncome();
            updateRebirthOptions();
            startIncomeTimer();
            updateCollections();
            updateAchievements();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã
        function loadGame() {
            const savedGame = localStorage.getItem('salavatGame');
            if (savedGame) {
                const gameData = JSON.parse(savedGame);
                currency = gameData.currency || 1000;
                playerCards = gameData.playerCards || {};
                rebirthMultiplier = gameData.rebirthMultiplier || 1.0;
                rebirths = gameData.rebirths || 0;
                collectionsCompleted = gameData.collectionsCompleted || 0;
                gameStats = gameData.gameStats || { packsOpened: 0, overloadsUsed: 0, unluckyAllOrNothing: false };
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞–∫–∏
                if (gameData.packs) {
                    packs.forEach((pack, index) => {
                        if (gameData.packs[index]) {
                            pack.load = gameData.packs[index].load;
                        }
                    });
                }
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            const gameData = {
                currency,
                playerCards,
                rebirthMultiplier,
                rebirths,
                collectionsCompleted,
                gameStats,
                packs: packs.map(pack => ({ load: pack.load }))
            };
            localStorage.setItem('salavatGame', JSON.stringify(gameData));
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–ø—Ü–∏–π –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è
        function updateRebirthOptions() {
            rebirthOptions.forEach((option, index) => {
                const element = document.getElementById(`rebirth-${index}`);
                if (index < rebirths) {
                    // –£–∂–µ –∫—É–ø–ª–µ–Ω–æ (–ø—Ä–æ—à–ª—ã–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è)
                    element.className = 'rebirth-option';
                    element.innerHTML = `
                        <h3>${option.name} ‚úÖ</h3>
                        <p><em>–£–∂–µ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–æ</em></p>
                        <p>–ù–∞–≥—Ä–∞–¥–∞: –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Ö–æ–¥–∞ x${option.multiplier}</p>
                    `;
                    element.onclick = null;
                } else if (index === rebirths) {
                    // –î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ (—Ç–µ–∫—É—â–µ–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ)
                    element.className = 'rebirth-option';
                    element.innerHTML = `
                        <h3>${option.name}</h3>
                        <p>–¶–µ–Ω–∞: ${formatNumber(option.price)} SU</p>
                        <p>–ù–∞–≥—Ä–∞–¥–∞: –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Ö–æ–¥–∞ x${option.multiplier}${option.bonusSU ? ` + ${formatNumber(option.bonusSU)} SU` : ''}</p>
                    `;
                    element.onclick = () => openRebirthModal(index);
                } else {
                    // –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ (–±—É–¥—É—â–∏–µ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è)
                    element.className = 'rebirth-option locked';
                    element.innerHTML = `
                        <h3>${option.name}</h3>
                        <p>–¶–µ–Ω–∞: ${formatNumber(option.price)} SU</p>
                        <p>–ù–∞–≥—Ä–∞–¥–∞: –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Ö–æ–¥–∞ x${option.multiplier}</p>
                        <p><em>–¢—Ä–µ–±—É–µ—Ç—Å—è: ${rebirthOptions[index-1].name}</em></p>
                    `;
                    element.onclick = null;
                }
            });
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName + '-tab').classList.add('active');
            document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`).classList.add('active');
        }

        // –†–µ–Ω–¥–µ—Ä –ø–∞–∫–æ–≤
        function renderPacks() {
            const packsContainer = document.getElementById('packs-container');
            packsContainer.innerHTML = '';
            
            packs.forEach((pack, index) => {
                const packElement = document.createElement('div');
                const isOverloaded = pack.load >= 100;
                packElement.className = `pack`;
                
                let loadInfo = '';
                if (pack.load > 0) {
                    loadInfo = `<div class="load-info">–ù–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å: ${pack.load}%</div>`;
                }
                
                packElement.innerHTML = `
                    ${pack.load > 0 ? `<div class="pack-overload-indicator ${isOverloaded ? 'pack-overload-ready' : ''}">${pack.load}%</div>` : ''}
                    <h3>${pack.name}</h3>
                    <div class="pack-price">${formatNumber(pack.price)} SU</div>
                    ${loadInfo}
                    <div class="load-bar-container">
                        <div class="load-progress ${isOverloaded ? 'load-bar-overload' : ''}" style="width: ${pack.load}%"></div>
                    </div>
                    <p>${getChancesText(pack.chances)}</p>
                    ${isOverloaded ? '<p style="color: var(--gold); font-weight: bold; font-size: 0.9rem;">‚ö° –°–ª–µ–¥—É—é—â–∏–π –ø–∞–∫ –¥–∞—Å—Ç 2-5 –∫–∞—Ä—Ç!</p>' : ''}
                `;
                packElement.addEventListener('click', () => buyPack(index));
                packsContainer.appendChild(packElement);
            });
        }

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
        }

        // –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç —à–∞–Ω—Å–æ–≤ –¥–ª—è –ø–∞–∫–∞
        function getChancesText(chances) {
            let text = '';
            for (const [rarity, chance] of Object.entries(chances)) {
                const rarityName = getRarityName(rarity);
                text += `${rarityName}: ${chance}%<br>`;
            }
            return text;
        }

        // –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–¥–∫–æ—Å—Ç–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
        function getRarityName(rarityKey) {
            const rarityNames = {
                "common": "–û–±—ã—á–Ω—ã–π",
                "rare": "–†–µ–¥–∫–∏–π",
                "super-epic": "–°–≤–µ—Ä—Ö—Ä–µ–¥–∫–∏–π",
                "epic": "–≠–ø–∏—á–µ—Å–∫–∏–π",
                "legendary": "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π",
                "mythic": "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π",
                "vanished": "–ò—Å—á–µ–∑–Ω—É–≤—à–∏–π",
                "assistant": "–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç—Å–∫–∏–π",
                "captain": "–ö–∞–ø–∏—Ç–∞–Ω—Å–∫–∏–π",
                "combined": "–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π",
                "infinity": "INFINITY"
            };
            return rarityNames[rarityKey] || rarityKey;
        }

        // –ü–æ–∫—É–ø–∫–∞ –ø–∞–∫–∞
        function buyPack(packIndex) {
            const pack = packs[packIndex];
            
            if (currency < pack.price) {
                showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ SU!", true);
                return;
            }
            
            currency -= pack.price;
            gameStats.packsOpened++;
            updateCurrencyDisplay();
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏
            const loadIncrease = Math.floor(Math.random() * 10) + 1;
            pack.load = Math.min(100, pack.load + loadIncrease);
            
            const isOverloaded = pack.load >= 100;
            let cardsCount = 1;
            
            if (isOverloaded && pack.name !== "ALL OR NOTHING") {
                cardsCount = Math.floor(Math.random() * 4) + 2; // 2-5 –∫–∞—Ä—Ç–æ—á–µ–∫
                pack.load = 0; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å
                gameStats.overloadsUsed++;
            }
            
            const newCards = [];
            for (let i = 0; i < cardsCount; i++) {
                const card = getCardFromPack(pack.chances);
                newCards.push(card);
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ—É–¥–∞—á—É –≤ ALL OR NOTHING
                if (pack.name === "ALL OR NOTHING" && card.rarityClass === "common") {
                    gameStats.unluckyAllOrNothing = true;
                }
                
                addCard(card);
            }
            
            renderPacks();
            updateAchievements();
            saveGame();
            
            let notificationText = `–ü–æ–ª—É—á–µ–Ω–æ: ${newCards.map(card => `${card.name} (${card.rarity})`).join(', ')}`;
            if (cardsCount > 1) {
                notificationText = `‚ö° –ú–£–õ–¨–¢–ò–î–†–û–ü! ${cardsCount} –∫–∞—Ä—Ç: ` + notificationText;
            }
            
            showNotification(notificationText);
        }

        // –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ä—Ç—É –∏–∑ –ø–∞–∫–∞
        function getCardFromPack(chances) {
            const randomValue = Math.random() * 100;
            let currentChance = 0;
            
            for (const [rarity, chance] of Object.entries(chances)) {
                currentChance += chance;
                if (randomValue <= currentChance) {
                    const playersOfRarity = players.filter(player => player.rarityClass === rarity);
                    if (playersOfRarity.length > 0) {
                        return playersOfRarity[Math.floor(Math.random() * playersOfRarity.length)];
                    }
                }
            }
            
            const commonPlayers = players.filter(player => player.rarityClass === "common");
            return commonPlayers[Math.floor(Math.random() * commonPlayers.length)];
        }

        // –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É
        function addCard(player) {
            if (playerCards[player.name]) {
                playerCards[player.name].count++;
            } else {
                playerCards[player.name] = {
                    player: player,
                    count: 1
                };
            }
            
            updateCardsDisplay();
            updateTotalIncome();
            updateCollections();
        }

        // –£–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç—É
        function removeCard(playerName) {
            if (playerCards[playerName]) {
                playerCards[playerName].count--;
                
                if (playerCards[playerName].count <= 0) {
                    delete playerCards[playerName];
                }
                
                updateCardsDisplay();
                updateTotalIncome();
                updateCollections();
            }
        }

        // –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–∫–∞—á–∫–∏
        function openUpgradeModal(playerName) {
            const cardData = playerCards[playerName];
            if (!cardData) return;
            
            if (currency < 25000) {
                showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ SU –¥–ª—è –ø—Ä–æ–∫–∞—á–∫–∏!", true);
                return;
            }
            
            currentUpgradeCard = playerName;
            document.getElementById('upgrade-card-name').textContent = cardData.player.name;
            document.getElementById('upgrade-modal').style.display = 'flex';
        }

        // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–∫–∞—á–∫–∏
        function closeUpgradeModal() {
            document.getElementById('upgrade-modal').style.display = 'none';
            currentUpgradeCard = null;
        }

        // –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø—Ä–æ–∫–∞—á–∫—É
        function confirmUpgrade() {
            if (!currentUpgradeCard) return;
            
            const cardData = playerCards[currentUpgradeCard];
            if (!cardData) return;
            
            const player = cardData.player;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–∫–∞—á–∫–∏
            if (player.upgradeOrder === -1) {
                showNotification("–≠—Ç—É –∫–∞—Ä—Ç—É –Ω–µ–ª—å–∑—è –ø—Ä–æ–∫–∞—á–∞—Ç—å!", true);
                closeUpgradeModal();
                return;
            }
            
            currency -= 25000;
            updateCurrencyDisplay();
            
            const randomValue = Math.random();
            
            // 10% —à–∞–Ω—Å –ø–æ—Ç–µ—Ä–∏ –∫–∞—Ä—Ç—ã
            if (randomValue < 0.1) {
                removeCard(currentUpgradeCard);
                showNotification(`üíî –ö–∞—Ä—Ç–∞ ${player.name} –ø–æ—Ç–µ—Ä—è–Ω–∞ –ø—Ä–∏ –ø—Ä–æ–∫–∞—á–∫–µ!`, true);
                closeUpgradeModal();
                saveGame();
                return;
            }
            
            // 10% —à–∞–Ω—Å —É—Å–ø–µ—Ö–∞
            if (randomValue < 0.2) {
                const nextRarityIndex = player.upgradeOrder + 1;
                if (nextRarityIndex >= rarityOrder.length) {
                    showNotification("–ö–∞—Ä—Ç–∞ —É–∂–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏!", true);
                    closeUpgradeModal();
                    return;
                }
                
                const nextRarity = rarityOrder[nextRarityIndex];
                const availableUpgrades = players.filter(p => 
                    p.rarityClass === nextRarity && p.upgradeOrder === nextRarityIndex
                );
                
                if (availableUpgrades.length > 0) {
                    const newPlayer = availableUpgrades[Math.floor(Math.random() * availableUpgrades.length)];
                    
                    // –ó–∞–º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∫–∞—Ä—Ç—É
                    if (cardData.count > 1) {
                        cardData.count--;
                        addCard(newPlayer);
                    } else {
                        delete playerCards[currentUpgradeCard];
                        addCard(newPlayer);
                    }
                    
                    showNotification(`üéâ –£—Å–ø–µ—Ö! ${player.name} ‚Üí ${newPlayer.name}`, false);
                }
            } else {
                showNotification("–ü—Ä–æ–∫–∞—á–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å! –ö–∞—Ä—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞.", true);
            }
            
            closeUpgradeModal();
            saveGame();
        }

        // –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è
        function openRebirthModal(optionIndex) {
            const option = rebirthOptions[optionIndex];
            if (!option) return;
            
            if (currency < option.price) {
                showNotification(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ SU! –ù—É–∂–Ω–æ: ${formatNumber(option.price)}`, true);
                return;
            }
            
            currentRebirthOption = optionIndex;
            document.getElementById('rebirth-description').textContent = 
                `–í—ã –ø–æ–ª—É—á–∏—Ç–µ –º–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Ö–æ–¥–∞ x${option.multiplier}${option.bonusSU ? ` + ${formatNumber(option.bonusSU)} SU` : ''}`;
            document.getElementById('rebirth-modal').style.display = 'flex';
        }

        // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è
        function closeRebirthModal() {
            document.getElementById('rebirth-modal').style.display = 'none';
            currentRebirthOption = null;
        }

        // –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ
        function confirmRebirth() {
            if (currentRebirthOption === null) return;
            
            const option = rebirthOptions[currentRebirthOption];
            
            // –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            playerCards = {};
            packs.forEach(pack => pack.load = 0);
            rebirthMultiplier *= option.multiplier; // –£–º–Ω–æ–∂–∞–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª–∏
            rebirths = currentRebirthOption + 1;
            
            // –ë–æ–Ω—É—Å–Ω—ã–µ SU
            if (option.bonusSU) {
                currency = option.bonusSU;
            } else {
                currency = 1000;
            }
            
            updateCurrencyDisplay();
            updateTotalIncome();
            updateCardsDisplay();
            updateRebirthOptions();
            renderPacks();
            updateAchievements();
            saveGame();
            
            showNotification(`üéâ –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Ö–æ–¥–∞: x${rebirthMultiplier.toFixed(1)}`);
            closeRebirthModal();
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏–∏
        function updateCollections() {
            const container = document.getElementById('collections-container');
            container.innerHTML = '';
            
            let completedCount = 0;
            
            collections.forEach(collection => {
                const hasAllCards = collection.cards.every(cardName => playerCards[cardName]);
                collection.completed = hasAllCards;
                
                if (hasAllCards) completedCount++;
                
                const collectionElement = document.createElement('div');
                collectionElement.className = `collection ${hasAllCards ? 'completed' : ''}`;
                
                collectionElement.innerHTML = `
                    <h4>${collection.name}</h4>
                    <p>${collection.cards.join(', ')}</p>
                    <p><strong>–ë–æ–Ω—É—Å: +${collection.bonus} –∫ –¥–æ—Ö–æ–¥—É</strong></p>
                    <p>${hasAllCards ? '‚úÖ –°–æ–±—Ä–∞–Ω–æ' : '‚ùå –ù–µ —Å–æ–±—Ä–∞–Ω–æ'}</p>
                `;
                
                container.appendChild(collectionElement);
            });
            
            collectionsCompleted = completedCount;
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        function updateAchievements() {
            const container = document.getElementById('achievements-container');
            container.innerHTML = '';
            
            achievements.forEach(achievement => {
                const isUnlocked = achievement.condition({
                    playerCards,
                    stats: gameStats,
                    rebirths,
                    collectionsCompleted
                });
                
                if (isUnlocked && !achievement.unlocked) {
                    achievement.unlocked = true;
                    showNotification(`üèÜ –ü–æ–ª—É—á–µ–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: ${achievement.name}`);
                }
                
                const achievementElement = document.createElement('div');
                achievementElement.className = `achievement ${achievement.gold ? 'gold' : ''} ${achievement.unlocked ? 'unlocked' : ''}`;
                
                achievementElement.innerHTML = `
                    <h4>${achievement.name}</h4>
                    <p>${achievement.description}</p>
                    <p>${achievement.unlocked ? '‚úÖ –ü–æ–ª—É—á–µ–Ω–æ' : 'üîí –ù–µ –ø–æ–ª—É—á–µ–Ω–æ'}</p>
                `;
                
                container.appendChild(achievementElement);
            });
            
            saveGame();
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç
        function updateCardsDisplay() {
            const cardsContainer = document.getElementById('cards-container');
            cardsContainer.innerHTML = '';
            
            for (const [playerName, cardData] of Object.entries(playerCards)) {
                const cardElement = document.createElement('div');
                const isUpgradable = cardData.player.upgradeOrder !== -1 && cardData.player.upgradeOrder < rarityOrder.length - 1;
                
                cardElement.className = `card card-${cardData.player.rarityClass} ${isUpgradable ? 'card-upgradable' : ''}`;
                
                cardElement.innerHTML = `
                    <div class="card-name">${playerName}</div>
                    <div class="card-rarity">${cardData.player.rarity}</div>
                    <div class="card-income">${formatNumber(cardData.player.income)} SU/—Å–µ–∫</div>
                    ${isUpgradable ? `<div class="upgrade-cost">–ü—Ä–æ–∫–∞—á–∫–∞: 25,000 SU</div>` : ''}
                    ${cardData.count > 1 ? `<div class="card-count">${cardData.count}</div>` : ''}
                `;
                
                if (isUpgradable) {
                    cardElement.addEventListener('click', () => openUpgradeModal(playerName));
                }
                
                cardsContainer.appendChild(cardElement);
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∞–ª—é—Ç—ã
        function updateCurrencyDisplay() {
            document.getElementById('currency-value').textContent = formatNumber(currency);
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –æ–±—â–∏–π –¥–æ—Ö–æ–¥
        function updateTotalIncome() {
            totalIncome = 0;
            
            // –ë–∞–∑–æ–≤—ã–π –¥–æ—Ö–æ–¥ –æ—Ç –∫–∞—Ä—Ç–æ—á–µ–∫
            for (const cardData of Object.values(playerCards)) {
                totalIncome += cardData.player.income * cardData.count;
            }
            
            // –ë–æ–Ω—É—Å—ã –æ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–π
            let collectionBonus = 1.0;
            collections.forEach(collection => {
                if (collection.completed) {
                    collectionBonus += collection.bonus;
                }
            });
            
            // –ò—Ç–æ–≥–æ–≤—ã–π –¥–æ—Ö–æ–¥ —Å —É—á–µ—Ç–æ–º –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π
            totalIncome = Math.floor(totalIncome * collectionBonus * rebirthMultiplier);
            
            document.getElementById('total-income').textContent = formatNumber(totalIncome);
            document.getElementById('income-multiplier').textContent = `–ú–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ—Ö–æ–¥–∞: x${(collectionBonus * rebirthMultiplier).toFixed(1)}`;
        }

        // –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä –¥–æ—Ö–æ–¥–∞
        function startIncomeTimer() {
            if (incomeInterval) {
                clearInterval(incomeInterval);
            }
            
            incomeInterval = setInterval(() => {
                currency += totalIncome;
                updateCurrencyDisplay();
                saveGame();
            }, 1000);
        }

        // –ú–∏–Ω–∏-–∏–≥—Ä–∞: Lucky-Man
        function startLuckyManGame() {
            if (currency < 2500) {
                showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ SU –¥–ª—è –∏–≥—Ä—ã!", true);
                return;
            }
            
            currency -= 2500;
            updateCurrencyDisplay();
            
            const card = getCardFromPack({
                "common": 40,
                "rare": 25,
                "super-epic": 15,
                "epic": 10,
                "legendary": 5,
                "mythic": 3,
                "vanished": 1.5,
                "assistant": 0.5
            });
            
            const rewards = {
                "common": 1000,
                "rare": 2500,
                "super-epic": 5000,
                "epic": 7500,
                "legendary": 10000,
                "mythic": 15000,
                "vanished": 20000,
                "assistant": 22500,
                "captain": 25000
            };
            
            const reward = rewards[card.rarityClass] || 1000;
            currency += reward;
            updateCurrencyDisplay();
            
            document.getElementById('lucky-man-result').innerHTML = `
                <p style="color: var(--green)">üé∞ –í—ã–ø–∞–ª–æ: ${card.name} (${card.rarity})</p>
                <p>–ù–∞–≥—Ä–∞–¥–∞: ${formatNumber(reward)} SU</p>
            `;
            
            saveGame();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, isError = false) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${isError ? 'error' : ''} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = initGame;
    </script>
</body>
</html>
